<div class="container-tm"
    [ngClass]="(menuOpen ? 'menuOpen':'')">
    <div class="container-wrapper">
        <div class="stream"
            *ngFor="let stream of dataByStreams">
            <div class="label"
                *ngIf='!isLegend || stream.legendItem === undefined; else elseBlock'> {{ stream.labelSrc }}</div>
            <ng-template #elseBlock>

                <div class="label"
                    [matTooltip]="stream.srcTip"
                    [ngClass]="{crossed: stream.legendItem?.hidden}"
                    (click)='hideLegend(stream.legendItem.datasetIndex)'>
                    <span style="color:rgb(184, 184, 184);font-size:12px">{{ stream.data[0].messageType }}</span>
                    {{stream.labelSrc}}
                    <div class="label-color"
                        [style.backgroundColor]='stream.legendItem && (stream.legendItem.fillStyle | colorOffset: "0":"0":"0":"1")'>
                    </div>
                </div>
            </ng-template>
            <div class="row">
                <div [ngClass]="{'column':true, 'last':index === stream.data.length - 1}"
                    *ngFor="let data of stream.data; let index = index"
                    (mouseover)="showTooltip(data.tooltipData)"
                    (mouseout)="hideTooltip()"
                    [style.left.%]="stream.data.length === 1 ? 0 : index !== stream.data.length - 1 ? data.fromPrecent : 99"
                    [style.right.%]="stream.data.length === 1 ? 0 : data.toPrecent"
                    (click)="onClickRTP(data, $event)"
                    [style.background-color]="data.mosColor"></div>
            </div>

            <div class="label right"
                [matTooltip]="stream.dstTip"
                [ngClass]="{crossed: stream.legendItem?.hidden}"
                (click)='hideLegend(stream.legendItem.datasetIndex)'>
                <div class="label-color"
                    [style.backgroundColor]='stream.legendItem && (stream.legendItem.fillStyle | colorOffset: "0":"0":"0":"1")'>
                </div>
                {{ stream.labelDist }}
                <span style="color:rgb(184, 184, 184);font-size:12px">{{ stream.data[0].messageType }}</span>
            </div>
        </div>

        <div class="stream timer">
            <div class="time-wrapper"
                *ngFor="let timeItem of arrayLocaleString">
                <div class="time" [matTooltip]="timeItem.datetime">{{ timeItem.time }}</div>
            </div>
        </div>
    </div>
</div>
